name: Daily Deploy Application Production

on: 
    push:
        branches: [main]

jobs:
    build:
        runs-on: ubuntu-latest
        steps: 
            - name: Checkout Code
              uses: actions/checkout@v3

            - name: Setup Java
              uses: actions/setup-java@3
              with: 
                distributtion: 'temurin' 
                java-version: '17'

            - name: Build Project
              run: maven clean install -DskipTests

            - name: Login Docker Hub
              run: docker login -u ${{secrets.DOCKER_USERNAME}} -p ${{secrets.DOCKER_PASSWORD}}

            - name: Build Docker Image
              run: docker build -t wladisilva/daily .

            - name: Push Image Docker
              run: docker push wladisilva/daily
            
              
